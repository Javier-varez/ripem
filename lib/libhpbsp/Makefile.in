LIBHPBSP_DIR = lib/libhpbsp

LIBHPBSP     = $(LIBHPBSP_DIR)/libhpbsp.a
LIBHPBSP_SRC = $(call LIST_SRCS,$(LIBHPBSP_DIR))
LIBHPBSP_OBJ = $(call SUBST_OBJ,$(LIBHPBSP_SRC),$(LIBHPBSP_DIR))

$(LIBHPBSP): $(LIBHPBSP_OBJ)
	$(ARM_AR) rcs $@ $^

$(LIBHPBSP_DIR)/%.o: $(LIBHPBSP_DIR)/%.c
	$(ARM_CC) $(ARM_CFLAGS) -c $< -o $@

$(LIBHPBSP_DIR)/%.o: $(LIBHPBSP_DIR)/%.S
	$(ARM_AS) $(ARM_AFLAGS) $< -o $@

ARM_CFLAGS += -I$(LIBHPBSP_DIR)
BUILD_FILES += $(LIBHPBSP)
CLEAN_FILES += $(LIBHPBSP_DIR)/*.a $(LIBHPBSP_DIR)/*.o